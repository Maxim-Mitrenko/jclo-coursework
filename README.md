# Курсовой проект "Сервис перевода денег"

Сервис состоит из двух частей:

* Backend приложение - Java REST приложение на Spring Boot
* Frontend приложение на nodejs

## Запуск

Frontend приложение запускается на порту 3000. Backend запускается на порту 5500.
Приложения имеют возможность упаковки в docker контейнеры. Для интеграции и удобного запуска сделан docker-compose.

### Как запустить приложение:

* Выполните команду: 
``` "
  mvn package -DskipTests
```
* Затем выполните команду, которая запустит приложение:
```
docker-compose up
```

Для использования приложения перейдите на http://localhost:3000. Вы автоматически будете перенаправлены на страницу перевода денег.
При отправке перевода frontend приложение будет отправлять запрос в backend.

## Описание приложения:

Backend приложение выполнено на языке Java и на фреймворке SpringBoot. Приложение покрыто Unit тестами с использованием
Mockito и интеграционными тестами на Docker контейнерах. Интеграционные тесты поднимают на случайном порту backend приложение
и отправляет на него запросы, проверяя валидацию. В программе имеются Unit тесты:
* Класс RepositoryTest - тестирует репозиторий
* ServiceTest - тестирует сервис
* TransferCardFromValidTill - тестирует проверку срока действия карты

Программа логирует в файл logs.log. Файл создаётся автоматически. Логирование выполняется с
помощью аннотации @Slf4j.

### Классы программы:
* пакет controller:
  * TransferController - основной контролер, где есть mapping на /transfer
  и /confirmOperation
  * ExceptionController - класс, который обрабатывает исключения и отправляет в ответ тело ErrorTransferResponse с кодом HttpStatus.BAD_REQUEST (400 Плохой запрос) 
  с помощью ResponseEntity
* пакет exception - классы-исключения, которые создал я
  * TransferNotFoundException - исключение перевод не найден при выполнении
  /confirmOperation
* пакет model - классы модели какого-то объекта
    * Amount - классы суммы
    * Confirmation - класс подтверждения
    * Status - enum статусов перевода
    * Transfer - класс перевода
    * пакет response - пакет с классами ответов
      * ErrorTransferResponse - класс ответа ошибкой
      * SuccesTransferResponse - класс успешного ответа
* пакет repository:
    * TransferRepository - репозиторий, который хранит переводы
* пакет service:
    * TransferService - сервис приложения

## Требования к картам

Карта должна состоять из 16 символов. Срок действия передаётся в формате
03/24 и должен быть действителен в данный момент. СVV должен состоять из 3 цифр.

Сумма принимается в формате 100.50(исходная сумма) => 10050(формат приема). Сумма передаётся в копейках.
##  Отправка запросов

Все объекты в программе принимаются и возвращаются в формате application/json.

Запросы отправляются на адреса: 
* /transfer - создание перевода. Принимает объект Transfer.
* /confirmation - подтверждение перевода. Принимает объект Confirmation.

Оба адреса возвращают ответ SuccesTransferResponse.